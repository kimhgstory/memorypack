# 06) 기능 정의서 v1 (W2)

## 1. 스키마 명세
### 템플릿 A (문서형 JSON)
- `title: string` **필수**
- `items: Array<{ q: string, a: string }>` **길이 ≥ 1**
- `tags: Array<string>` **선택**
- 예시: 03_format_examples.md 참고

### 템플릿 B (JSONL)
- 라인 단위 객체: `{"q": string, "a": string}`
- 구분: LF(`\n`)
- 첫/마지막에 공백 라인 없음

### 템플릿 C (QA 배열 JSON)
- `title: string` **필수**
- `qa: Array<{ id: number>=1, question: string, answer: string }>` **길이 ≥ 1**
- `tags: Array<string>` **선택**
- `id`는 1부터 연속 증가

## 2. 파일명 규칙
- 형식: `slug(title)_YYYYMMDD_HHMM.ext`
- `.ext`: A/C → `.json`, B → `.jsonl`
- **slug(title)** 생성 규칙
  - 허용: `[0-9A-Za-z]`, 한글(가-힣), 공백, `-`
  - 변환: 공백→`-` / 다중 `-` → 1개 / 앞뒤 `-` 제거 / 소문자
  - 결과가 빈 문자열이면 `untitled` 사용

## 3. 검증/에러 처리 (정확 문자열)
- 빈 제목: `제목이 비었습니다.`
- 항목 0개: `항목이 한 개도 없습니다. "행 추가" 또는 "자동채우기"를 눌러주세요.`
- 빈 항목 포함 시 confirm:
  - 질문: `빈 칸이 있는 항목이 있습니다. 빈 항목은 제외하고 진행할까요?`
  - 제외 후 길이=0 → `모든 항목이 비어 제외되었습니다. 내용을 입력해주세요.`
- 저장/불러오기:
  - 저장 성공: `로컬 저장 완료!`
  - 저장 실패: `로컬 저장 실패: ...`
  - 불러오기 성공: `불러오기 완료!`
  - 불러오기 실패: `저장된 데이터가 없습니다.` or `불러오기 실패: ...`

## 4. 저장소
- `localStorage("structured_text_mvp")`
- 시크릿/인코그니토: 저장 내용은 **창 닫으면 사라질 수 있음**(UI 안내 포함)

## 5. 성능/품질 기준
- 1000행 기준: **적용 ≤ 100ms**, **다운로드 ≤ 50ms** (현 측정 통과)
- 이스케이프: 따옴표/중괄호/개행은 JSON 규칙 준수
- 오프라인 우선: 네트워크 요청 없음

## 6. 지원 환경
- 최신 Chrome/Edge 데스크톱 (로컬 파일로 실행)
- 파이어폭스/사파리는 추후 검증

## 7. 릴리스/게이트 연동
- 8/17 게이트: 입력→미리보기→다운로드 + 로컬 저장 **완료**
- 8/24 게이트: 템플릿 v1 + 경고/알림 **완료**
- 다음: 문서 보강/README 반영 → 8/31 데모 스크립트 작성
